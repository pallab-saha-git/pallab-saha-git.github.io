<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Sequence Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .diagram-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Chatbot Request Processing Flow</h1>
    <div class="diagram-container">
        <div class="mermaid">
sequenceDiagram
    participant U as User
    participant W as Website
    participant C as Chatbot Widget
    participant A as API Gateway
    participant P as Processor
    participant V as Vector DB
    participant L as LLM
    participant WA as WhatsApp
    
    U->>W: Visit Website
    W->>C: Load Chatbot
    U->>C: Ask Question
    C->>A: Send Query
    A->>P: Process Request
    
    P->>V: Search Similar Content
    V-->>P: Return Relevant Chunks
    
    P->>L: Generate Response
    Note over L: Context: Website content<br/>+ Additional KB
    L-->>P: AI Response
    
    alt Confident Response
        P-->>A: Return Answer
        A-->>C: Send Response
        C-->>U: Display Answer
    else Low Confidence
        P->>WA: Escalate to Human
        WA-->>U: WhatsApp Notification
        Note over U,WA: Continue on WhatsApp
    end
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            sequence: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
    <!-- Back to Portfolio -->
    <a href="../../index.html" class="back-to-portfolio" title="Back to Portfolio" aria-label="Back to Portfolio"><i class="fas fa-home"></i><span>Portfolio</span></a>
    <style>.back-to-portfolio{position:fixed;bottom:28px;right:28px;display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#00f7ff 0%,#0073ff 100%);color:#050714;padding:12px 22px;border-radius:50px;text-decoration:none;font-weight:700;font-size:14px;letter-spacing:.3px;box-shadow:0 4px 20px rgba(0,247,255,.4),0 0 0 1px rgba(0,247,255,.15);z-index:99999;transition:transform .25s ease,box-shadow .25s ease;font-family:'Inter','Segoe UI',Tahoma,sans-serif;}.back-to-portfolio:hover{transform:translateY(-3px) scale(1.03);box-shadow:0 10px 35px rgba(0,247,255,.55),0 0 0 1px rgba(0,247,255,.3);}.back-to-portfolio i{font-size:14px;}</style>
</body>
</html> 