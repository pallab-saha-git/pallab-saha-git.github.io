<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local/Self-Hosted - Chatbot Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #27ae60;
        }
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .cost-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border-left: 6px solid #27ae60;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-server"></i> Local/Self-Hosted Infrastructure</h1>
            <h2>On-Premise Chatbot Architecture</h2>
        </div>
        
        <div class="mermaid">
graph TB
    subgraph "Frontend & Web Server"
        Nginx["`**Nginx Web Server**
        ‚Ä¢ Reverse proxy
        ‚Ä¢ SSL termination
        ‚Ä¢ Static file serving
        ‚Ä¢ Load balancing`"]
        
        StaticFiles["`**Static Website Files**
        ‚Ä¢ HTML/CSS/JS
        ‚Ä¢ Chatbot widget
        ‚Ä¢ CDN alternative
        ‚Ä¢ Local hosting`"]
        
        Widget["`**Chatbot Widget**
        ‚Ä¢ Vanilla JS/React
        ‚Ä¢ WebSocket connection
        ‚Ä¢ Local assets`"]
    end
    
    subgraph "API Gateway & Security"
        Kong["`**Kong API Gateway**
        ‚Ä¢ Rate limiting
        ‚Ä¢ Authentication
        ‚Ä¢ Request routing
        ‚Ä¢ Plugin ecosystem`"]
        
        Traefik["`**Traefik**
        ‚Ä¢ Automatic service discovery
        ‚Ä¢ SSL certificates
        ‚Ä¢ Load balancing
        ‚Ä¢ Docker integration`"]
        
        OAuth["`**OAuth2 Proxy**
        ‚Ä¢ JWT validation
        ‚Ä¢ Session management
        ‚Ä¢ OIDC integration`"]
        
        Vault["`**HashiCorp Vault**
        ‚Ä¢ Secrets management
        ‚Ä¢ API key storage
        ‚Ä¢ Certificate authority`"]
    end
    
    subgraph "Container Orchestration"
        Docker["`**Docker Containers**
        ‚Ä¢ Application isolation
        ‚Ä¢ Easy deployment
        ‚Ä¢ Resource management
        ‚Ä¢ Volume mounting`"]
        
        K8s["`**Kubernetes**
        ‚Ä¢ Pod orchestration
        ‚Ä¢ Service discovery
        ‚Ä¢ Auto-scaling
        ‚Ä¢ Rolling updates`"]
        
        DockerCompose["`**Docker Compose**
        ‚Ä¢ Multi-container apps
        ‚Ä¢ Development setup
        ‚Ä¢ Simple orchestration`"]
    end
    
    subgraph "Application Layer"
        FastAPI["`**FastAPI Application**
        ‚Ä¢ Python backend
        ‚Ä¢ Async support
        ‚Ä¢ Auto documentation
        ‚Ä¢ High performance`"]
        
        Express["`**Express.js/Node.js**
        ‚Ä¢ JavaScript backend
        ‚Ä¢ Real-time features
        ‚Ä¢ NPM ecosystem
        ‚Ä¢ WebSocket support`"]
        
        Flask["`**Flask Application**
        ‚Ä¢ Lightweight Python
        ‚Ä¢ Microservices
        ‚Ä¢ RESTful APIs
        ‚Ä¢ Simple deployment`"]
    end
    
    subgraph "AI & ML Stack"
        Ollama["`**Ollama**
        ‚Ä¢ Local LLM hosting
        ‚Ä¢ Llama 2, Mistral
        ‚Ä¢ GPU acceleration
        ‚Ä¢ REST API`"]
        
        LlamaIndex["`**LlamaIndex**
        ‚Ä¢ Data framework
        ‚Ä¢ Document indexing
        ‚Ä¢ Query engine
        ‚Ä¢ Local RAG`"]
        
        ChromaDB["`**ChromaDB**
        ‚Ä¢ Vector database
        ‚Ä¢ Similarity search
        ‚Ä¢ Local embeddings
        ‚Ä¢ Python integration`"]
        
        HuggingFace["`**Hugging Face Transformers**
        ‚Ä¢ Sentence transformers
        ‚Ä¢ Local embeddings
        ‚Ä¢ Model fine-tuning
        ‚Ä¢ CPU/GPU support`"]
        
        FAISS["`**FAISS**
        ‚Ä¢ Vector similarity search
        ‚Ä¢ High performance
        ‚Ä¢ GPU acceleration
        ‚Ä¢ Facebook AI research`"]
    end
    
    subgraph "Data Storage"
        PostgreSQL["`**PostgreSQL**
        ‚Ä¢ Relational database
        ‚Ä¢ ACID compliance
        ‚Ä¢ Full-text search
        ‚Ä¢ JSON support`"]
        
        MongoDB["`**MongoDB**
        ‚Ä¢ Document database
        ‚Ä¢ Flexible schema
        ‚Ä¢ GridFS storage
        ‚Ä¢ Aggregation pipeline`"]
        
        Redis["`**Redis**
        ‚Ä¢ In-memory cache
        ‚Ä¢ Session storage
        ‚Ä¢ Pub/Sub messaging
        ‚Ä¢ Persistence options`"]
        
        MinIO["`**MinIO**
        ‚Ä¢ S3-compatible storage
        ‚Ä¢ Object storage
        ‚Ä¢ High performance
        ‚Ä¢ Kubernetes native`"]
    end
    
    subgraph "Message Queue & Events"
        RabbitMQ["`**RabbitMQ**
        ‚Ä¢ Message broker
        ‚Ä¢ AMQP protocol
        ‚Ä¢ Reliable delivery
        ‚Ä¢ Management UI`"]
        
        ApacheKafka["`**Apache Kafka**
        ‚Ä¢ Event streaming
        ‚Ä¢ High throughput
        ‚Ä¢ Distributed logs
        ‚Ä¢ Real-time processing`"]
        
        Celery["`**Celery**
        ‚Ä¢ Distributed task queue
        ‚Ä¢ Background jobs
        ‚Ä¢ Retry mechanisms
        ‚Ä¢ Monitoring`"]
    end
    
    subgraph "Monitoring & Logging"
        Prometheus["`**Prometheus**
        ‚Ä¢ Metrics collection
        ‚Ä¢ Time series DB
        ‚Ä¢ Alert manager
        ‚Ä¢ Service discovery`"]
        
        Grafana["`**Grafana**
        ‚Ä¢ Visualization
        ‚Ä¢ Dashboards
        ‚Ä¢ Alerting
        ‚Ä¢ Multiple data sources`"]
        
        ELK["`**ELK Stack**
        ‚Ä¢ Elasticsearch
        ‚Ä¢ Logstash
        ‚Ä¢ Kibana
        ‚Ä¢ Log analysis`"]
        
        Jaeger["`**Jaeger**
        ‚Ä¢ Distributed tracing
        ‚Ä¢ Performance monitoring
        ‚Ä¢ Service dependencies`"]
    end
    
    subgraph "External Integrations"
        Webhook["`**Custom Webhook Server**
        ‚Ä¢ WhatsApp integration
        ‚Ä¢ SMS gateways
        ‚Ä¢ Email notifications
        ‚Ä¢ Custom APIs`"]
        
        TwilioLocal["`**Twilio SDK**
        ‚Ä¢ WhatsApp Business API
        ‚Ä¢ SMS services
        ‚Ä¢ Voice calls
        ‚Ä¢ Programmable messaging`"]
    end
    
    %% Connections
    Nginx --> StaticFiles
    StaticFiles --> Widget
    Widget --> Kong
    Kong --> Traefik
    Traefik --> OAuth
    OAuth --> Vault
    Kong --> FastAPI
    FastAPI --> RabbitMQ
    RabbitMQ --> Docker
    Docker --> Redis
    Docker --> ChromaDB
    ChromaDB --> Ollama
    Ollama --> HuggingFace
    FastAPI --> PostgreSQL
    FastAPI --> Webhook
    
    K8s --> LlamaIndex
    LlamaIndex --> FAISS
    MinIO --> ApacheKafka
    
    FastAPI --> Prometheus
    Docker --> Prometheus
    Prometheus --> Grafana
    Webhook --> TwilioLocal
    
    %% Styling
    classDef local fill:#27ae60,stroke:#1e8449,stroke-width:2px,color:#fff
    classDef ai fill:#8e44ad,stroke:#7d3c98,stroke-width:2px,color:#fff
    classDef data fill:#2980b9,stroke:#2471a3,stroke-width:2px,color:#fff
    classDef external fill:#e67e22,stroke:#d35400,stroke-width:2px,color:#fff
    classDef monitoring fill:#34495e,stroke:#2c3e50,stroke-width:2px,color:#fff
    
    class Nginx,StaticFiles,Widget,Kong,Traefik,OAuth,Vault,Docker,K8s,DockerCompose,FastAPI,Express,Flask local
    class Ollama,LlamaIndex,ChromaDB,HuggingFace,FAISS ai
    class PostgreSQL,MongoDB,Redis,MinIO data
    class RabbitMQ,ApacheKafka,Celery,Webhook,TwilioLocal external
    class Prometheus,Grafana,ELK,Jaeger monitoring
        </div>
        
        <div class="cost-section">
            <h3><i class="fas fa-dollar-sign"></i> Local/Self-Hosted Cost Analysis</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4>Infrastructure Costs:</h4>
                    <ul>
                        <li>Server Hardware: $200-500/month</li>
                        <li>GPU for AI (RTX 4090): $1,600 one-time</li>
                        <li>Network/Internet: $50-100/month</li>
                        <li>Backup Storage: $20-50/month</li>
                    </ul>
                </div>
                <div>
                    <h4>Operational Costs:</h4>
                    <ul>
                        <li>Electricity: $50-150/month</li>
                        <li>Maintenance Time: $500-2000/month</li>
                        <li>Software Licenses: $0 (Open Source)</li>
                        <li>SSL Certificates: $0-200/year</li>
                    </ul>
                </div>
            </div>
            <div style="background: #2c3e50; color: white; padding: 20px; border-radius: 8px; text-align: center; margin-top: 20px;">
                <strong>Total Monthly Cost: $320-800/month</strong>
                <p>Plus initial hardware investment ($2,000-5,000)</p>
                <div style="margin-top: 15px; padding: 15px; background: #27ae60; border-radius: 5px;">
                    <strong>Benefits:</strong> Complete data control, no API limits, customizable, privacy-first
                </div>
            </div>
        </div>
        
        <div style="background: #ecf0f1; border-radius: 12px; padding: 25px; margin: 30px 0;">
            <h3><i class="fas fa-tools"></i> Recommended Tech Stack</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>üê≥ Container Setup</h4>
                    <p>Docker + Docker Compose for easy deployment and management</p>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>ü§ñ AI Models</h4>
                    <p>Ollama + Llama 2 7B for cost-effective local AI</p>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>üóÑÔ∏è Vector Database</h4>
                    <p>ChromaDB for local vector storage and search</p>
                </div>
                <div style="background: white; padding: 15px; border-radius: 8px;">
                    <h4>üìä Monitoring</h4>
                    <p>Prometheus + Grafana for comprehensive monitoring</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html> 